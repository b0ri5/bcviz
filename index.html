<html>
<head>
  <script src="//code.jquery.com/jquery-latest.min.js"></script>
  <script type="text/javascript" src="//jquery-csv.googlecode.com/git/src/jquery.csv.js"></script>
  <script type="text/javascript" src="//www.google.com/jsapi"></script>
  <script type="text/javascript">
    console.log('hi');
    google.load('visualization', '1', {'packages': ['timeline']});
google.setOnLoadCallback(drawChart);

var START_TIME = "Start Time";
var END_TIME = "End Time";
var ACTIVITY = "Activity";
var DURATION = "Duration (min)";

function drawChart() {
  var container = document.getElementById('example1');

  var chart = new google.visualization.Timeline(container);

  var dataTable = new google.visualization.DataTable();

  dataTable.addColumn({ type: 'string', id: 'President' });
  dataTable.addColumn({ type: 'date', id: 'Start' });
  dataTable.addColumn({ type: 'date', id: 'End' });

  dataTable.addRows([
    [ 'Washington', new Date(1789, 3, 29), new Date(1797, 2, 3) ],
    [ 'Adams',      new Date(1797, 2, 3),  new Date(1801, 2, 3) ],
    [ 'Jefferson',  new Date(1801, 2, 3),  new Date(1809, 2, 3) ]]);

  chart.draw(dataTable);
  console.log('loaded');
  $.ajax({
  url: "//rawgithub.com/b0ri5/bcviz/master/maradata.csv"
})
  .done(function( data ) {
    if ( console && console.log ) {
      console.log( "Sample of data:", data.slice( 0, 100 ) );
      console.log('toObjects', $.csv.toObjects(data));
      
      console.log("initial checkpoint");
      var counter = 0;
      for (var entry in data) {
        counter++;
        if (counter < 5) {
          console.log(entry);
        }
        if (entry[ACTIVITY] === "Sleep") {
          console.log(entry);
          console.log("checkpoint");
        }
      }
    }
  });
}
</script>
</head>
<body>
<div id="example1" style="width: 900px; height: 180px;"></div>
</body>
</html>
